1ecb5d0131e4a25bcba7bef3ea090b75
import { error, success } from 'redux-saga-requests';
import thunk from 'redux-thunk';
import { selectors } from '../module/selectors';
import * as moduleActions from '../module/actions';
import fetchMock from 'fetch-mock';
import { projectCardService } from '../../../import';
import configureStore from 'redux-mock-store';
const {
  projectCardReducer,
  name,
  types,
  actions,
  api,
  endpoints
} = projectCardService;
const initialMockState = {
  mockTitle: 'mockTitle',
  mockData: ['papul', 'banana', 'minion']
};
const middlewares = [thunk];
const mockStore = configureStore(middlewares);
const store = mockStore({
  project: []
});
describe('Test projectCard service', () => {
  for (var prop in types) {
    if (types.hasOwnProperty(prop)) {
      it('type format should be correct', () => {
        const typeValue = name + '/' + prop;
        expect(types[prop]).toBe(typeValue);
      });
    }
  }
});
describe('Test projectCard service reducer', () => {
  it('should handle LOAD_PROJECT', () => {
    const successAction = {
      type: success(types.LOAD_PROJECT),
      payload: {
        data: {
          test: 'test'
        }
      }
    };
    expect(projectCardReducer({}, successAction)).toEqual({
      project: {
        test: 'test'
      }
    });
  });
  it('should return emptyState when error', () => {
    const errorAction = {
      type: error(types.LOAD_PROJECT),
      payload: "if you see it reducer doesn't works"
    };
    expect(projectCardReducer({
      initialState: 'initialState'
    }, errorAction)).toEqual({
      initialState: 'initialState'
    });
  });
});
describe('Test projectCard service actions', () => {
  beforeEach(() => {
    // Runs before each test in the suite
    store.clearActions();
  });
  afterEach(() => {
    fetchMock.restore();
  });
  test('Dispatches the correct action and payload', () => {
    const expectedActions = [{
      payload: {
        request: {
          url: 'http://localhost:3000/project/'
        }
      },
      type: 'project-card/LOAD_PROJECT'
    }];
    store.dispatch(actions.loadProject());
    expect(store.getActions()).toEqual(expectedActions);
  });
  test('creates project-card/LOAD_PROJECT_SUCCESS when fetching data has been done', () => {
    const endpoint = api + endpoints.project;
    fetchMock.getOnce(endpoint, {
      body: {
        project: {
          someprojectId: 'theId'
        }
      },
      headers: {
        'content-type': 'application/json'
      }
    });
    const expectedActions = [{
      type: types.LOAD_PROJECT
    }, {
      type: success(types.LOAD_TABS),
      body: {
        project: {
          someprojectId: 'theId'
        }
      }
    }];
    store.dispatch(actions.loadProject());
    expect(store.getActions()).toEqual(expectedActions);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZHV4U2FnYXMudGVzdC5qcyJdLCJuYW1lcyI6WyJlcnJvciIsInN1Y2Nlc3MiLCJ0aHVuayIsInNlbGVjdG9ycyIsIm1vZHVsZUFjdGlvbnMiLCJmZXRjaE1vY2siLCJwcm9qZWN0Q2FyZFNlcnZpY2UiLCJjb25maWd1cmVTdG9yZSIsInByb2plY3RDYXJkUmVkdWNlciIsIm5hbWUiLCJ0eXBlcyIsImFjdGlvbnMiLCJhcGkiLCJlbmRwb2ludHMiLCJpbml0aWFsTW9ja1N0YXRlIiwibW9ja1RpdGxlIiwibW9ja0RhdGEiLCJtaWRkbGV3YXJlcyIsIm1vY2tTdG9yZSIsInN0b3JlIiwicHJvamVjdCIsImRlc2NyaWJlIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiaXQiLCJ0eXBlVmFsdWUiLCJleHBlY3QiLCJ0b0JlIiwic3VjY2Vzc0FjdGlvbiIsInR5cGUiLCJMT0FEX1BST0pFQ1QiLCJwYXlsb2FkIiwiZGF0YSIsInRlc3QiLCJ0b0VxdWFsIiwiZXJyb3JBY3Rpb24iLCJpbml0aWFsU3RhdGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBY3Rpb25zIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZSIsImV4cGVjdGVkQWN0aW9ucyIsInJlcXVlc3QiLCJ1cmwiLCJkaXNwYXRjaCIsImxvYWRQcm9qZWN0IiwiZ2V0QWN0aW9ucyIsImVuZHBvaW50IiwiZ2V0T25jZSIsImJvZHkiLCJzb21lcHJvamVjdElkIiwiaGVhZGVycyIsIkxPQURfVEFCUyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUUEsS0FBUixFQUFlQyxPQUFmLFFBQTZCLHFCQUE3QjtBQUNBLE9BQU9DLEtBQVAsTUFBa0IsYUFBbEI7QUFDQSxTQUFRQyxTQUFSLFFBQXdCLHFCQUF4QjtBQUNBLE9BQU8sS0FBS0MsYUFBWixNQUErQixtQkFBL0I7QUFDQSxPQUFPQyxTQUFQLE1BQXNCLFlBQXRCO0FBQ0EsU0FBUUMsa0JBQVIsUUFBaUMsaUJBQWpDO0FBQ0EsT0FBT0MsY0FBUCxNQUEyQixrQkFBM0I7QUFF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bSAncmVkdXgtc2FnYS1yZXF1ZXN0cyc7XG5pbXBvcnQgdGh1bmsgZnJvbSAncmVkdXgtdGh1bmsnO1xuaW1wb3J0IHtzZWxlY3RvcnN9IGZyb20gJy4uL21vZHVsZS9zZWxlY3RvcnMnO1xuaW1wb3J0ICogYXMgbW9kdWxlQWN0aW9ucyBmcm9tICcuLi9tb2R1bGUvYWN0aW9ucyc7XG5pbXBvcnQgZmV0Y2hNb2NrIGZyb20gJ2ZldGNoLW1vY2snO1xuaW1wb3J0IHtwcm9qZWN0Q2FyZFNlcnZpY2V9IGZyb20gJy4uLy4uLy4uL2ltcG9ydCc7XG5pbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAncmVkdXgtbW9jay1zdG9yZSc7XG5cbmNvbnN0IHtcblx0cHJvamVjdENhcmRSZWR1Y2VyLFxuXHRuYW1lLFxuXHR0eXBlcyxcblx0YWN0aW9ucyxcblx0YXBpLFxuXHRlbmRwb2ludHNcbn0gPSBwcm9qZWN0Q2FyZFNlcnZpY2U7XG5cbmNvbnN0IGluaXRpYWxNb2NrU3RhdGUgPSB7XG5cdG1vY2tUaXRsZTogJ21vY2tUaXRsZScsXG5cdG1vY2tEYXRhOiBbJ3BhcHVsJywgJ2JhbmFuYScsICdtaW5pb24nXVxufTtcblxuY29uc3QgbWlkZGxld2FyZXMgPSBbdGh1bmtdO1xuY29uc3QgbW9ja1N0b3JlID0gY29uZmlndXJlU3RvcmUobWlkZGxld2FyZXMpO1xuY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe3Byb2plY3Q6IFtdfSk7XG5cbmRlc2NyaWJlKCdUZXN0IHByb2plY3RDYXJkIHNlcnZpY2UnLCAoKSA9PiB7XG5cdGZvciAodmFyIHByb3AgaW4gdHlwZXMpIHtcblx0XHRpZiAodHlwZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcblx0XHRcdGl0KCd0eXBlIGZvcm1hdCBzaG91bGQgYmUgY29ycmVjdCcsICgpID0+IHtcblx0XHRcdFx0Y29uc3QgdHlwZVZhbHVlID0gbmFtZSArICcvJyArIHByb3A7XG5cdFx0XHRcdGV4cGVjdCh0eXBlc1twcm9wXSkudG9CZSh0eXBlVmFsdWUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KTtcblxuZGVzY3JpYmUoJ1Rlc3QgcHJvamVjdENhcmQgc2VydmljZSByZWR1Y2VyJywgKCkgPT4ge1xuXHRpdCgnc2hvdWxkIGhhbmRsZSBMT0FEX1BST0pFQ1QnLCAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VjY2Vzc0FjdGlvbiA9IHtcblx0XHRcdHR5cGU6IHN1Y2Nlc3ModHlwZXMuTE9BRF9QUk9KRUNUKSxcblx0XHRcdHBheWxvYWQ6IHtkYXRhOiB7dGVzdDogJ3Rlc3QnfX1cblx0XHR9O1xuXHRcdGV4cGVjdChwcm9qZWN0Q2FyZFJlZHVjZXIoe30sIHN1Y2Nlc3NBY3Rpb24pKS50b0VxdWFsKHtcblx0XHRcdHByb2plY3Q6IHt0ZXN0OiAndGVzdCd9XG5cdFx0fSk7XG5cdH0pO1xuXHRpdCgnc2hvdWxkIHJldHVybiBlbXB0eVN0YXRlIHdoZW4gZXJyb3InLCAoKSA9PiB7XG5cdFx0Y29uc3QgZXJyb3JBY3Rpb24gPSB7XG5cdFx0XHR0eXBlOiBlcnJvcih0eXBlcy5MT0FEX1BST0pFQ1QpLFxuXHRcdFx0cGF5bG9hZDogXCJpZiB5b3Ugc2VlIGl0IHJlZHVjZXIgZG9lc24ndCB3b3Jrc1wiXG5cdFx0fTtcblx0XHRleHBlY3QoXG5cdFx0XHRwcm9qZWN0Q2FyZFJlZHVjZXIoe2luaXRpYWxTdGF0ZTogJ2luaXRpYWxTdGF0ZSd9LCBlcnJvckFjdGlvbilcblx0XHQpLnRvRXF1YWwoe2luaXRpYWxTdGF0ZTogJ2luaXRpYWxTdGF0ZSd9KTtcblx0fSk7XG59KTtcblxuZGVzY3JpYmUoJ1Rlc3QgcHJvamVjdENhcmQgc2VydmljZSBhY3Rpb25zJywgKCkgPT4ge1xuXHRiZWZvcmVFYWNoKCgpID0+IHtcblx0XHQvLyBSdW5zIGJlZm9yZSBlYWNoIHRlc3QgaW4gdGhlIHN1aXRlXG5cdFx0c3RvcmUuY2xlYXJBY3Rpb25zKCk7XG5cdH0pO1xuXHRhZnRlckVhY2goKCkgPT4ge1xuXHRcdGZldGNoTW9jay5yZXN0b3JlKCk7XG5cdH0pO1xuXHR0ZXN0KCdEaXNwYXRjaGVzIHRoZSBjb3JyZWN0IGFjdGlvbiBhbmQgcGF5bG9hZCcsICgpID0+IHtcblx0XHRjb25zdCBleHBlY3RlZEFjdGlvbnMgPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHBheWxvYWQ6IHtyZXF1ZXN0OiB7dXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3Byb2plY3QvJ319LFxuXHRcdFx0XHR0eXBlOiAncHJvamVjdC1jYXJkL0xPQURfUFJPSkVDVCdcblx0XHRcdH1cblx0XHRdO1xuXHRcdHN0b3JlLmRpc3BhdGNoKGFjdGlvbnMubG9hZFByb2plY3QoKSk7XG5cdFx0ZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuXHR9KTtcblx0dGVzdCgnY3JlYXRlcyBwcm9qZWN0LWNhcmQvTE9BRF9QUk9KRUNUX1NVQ0NFU1Mgd2hlbiBmZXRjaGluZyBkYXRhIGhhcyBiZWVuIGRvbmUnLCAoKSA9PiB7XG5cdFx0Y29uc3QgZW5kcG9pbnQgPSBhcGkgKyBlbmRwb2ludHMucHJvamVjdDtcblx0XHRmZXRjaE1vY2suZ2V0T25jZShlbmRwb2ludCwge1xuXHRcdFx0Ym9keToge3Byb2plY3Q6IHtzb21lcHJvamVjdElkOiAndGhlSWQnfX0sXG5cdFx0XHRoZWFkZXJzOiB7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cblx0XHR9KTtcblxuXHRcdGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcblx0XHRcdHt0eXBlOiB0eXBlcy5MT0FEX1BST0pFQ1R9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBzdWNjZXNzKHR5cGVzLkxPQURfVEFCUyksXG5cdFx0XHRcdGJvZHk6IHtwcm9qZWN0OiB7c29tZXByb2plY3RJZDogJ3RoZUlkJ319XG5cdFx0XHR9XG5cdFx0XTtcblx0XHRzdG9yZS5kaXNwYXRjaChhY3Rpb25zLmxvYWRQcm9qZWN0KCkpO1xuXHRcdGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKTtcblx0fSk7XG59KTtcbiJdfQ==