{"version":3,"sources":["index.js"],"names":["name","api","pkg","ru_ursip","services","LOAD_DICTS","LOAD_DICT_ELEMENTS","SAVE_DICT","SAVE_DICT_ROW","MAKE_REPORT","types","shittylize","data","attributes","hierarchy","deleted","transfer","rest","Number","context","hierarchyDict","metaAttrs","map","link","array","required","unique","type","attr","typeAttr","nickDictLink","arrayAttr","shittylizeElement","values","Object","value","nick","nickAttr","actions","loadAllCatalogs","payload","request","url","meta","mock","requestConfig","dict","loadElements","elements","metaDictSave","method","headers","body","JSON","stringify","metaDict","saveDictRow","nickDict","valueDict","element","makeReport","normalize","response","Array","isArray","metaAttributes","nsiMetaAttrs","Boolean","normalizeElements","id","elementId","valueAttr","normalizeAttributes","initialState","catalogs","reducer","state","reduce","acc","sort","a","b","orders"],"mappings":"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","sourcesContent":["import {success} from 'redux-saga-requests';\nimport pkg from '../../package.json';\nimport {capitlizeObjectKeys, dataToEntities} from '../../import';\n\nimport catalogJson from './catalog.json';\n\nimport elements from './elements.json';\nimport dict from './dict.json';\n\nconst name = 'ursip-nsi-service';\nconst api = pkg.ru_ursip.services[name];\n\n/* Types */\nconst LOAD_DICTS = `${name}/LOAD_DICTS`;\nconst LOAD_DICT_ELEMENTS = `${name}/LOAD_DICT_ELEMENTS`;\nconst SAVE_DICT = `${name}/SAVE_DICT`;\nconst SAVE_DICT_ROW = `${name}/SAVE_DICT_ROW`;\nconst MAKE_REPORT = `${name}/MAKE_REPORT`;\n\nconst types = {\n\tLOAD_DICTS,\n\tLOAD_DICT_ELEMENTS,\n\tSAVE_DICT_ROW,\n\tSAVE_DICT,\n\tMAKE_REPORT\n};\n\nfunction shittylize(data) {\n\tconst {attributes, hierarchy, deleted, transfer, ...rest} = data || {};\n\n\treturn {\n\t\t...rest,\n\t\ttransfer: Number(transfer) || 0,\n\t\tcontext:\n\t\t\trest.context === true || rest.context === 'SYSTEM'\n\t\t\t\t? 'SYSTEM'\n\t\t\t\t: 'COMMON',\n\t\tdeleted: Number(deleted) || 0,\n\t\thierarchyDict: Number(hierarchy) || 0,\n\t\tmetaAttrs: (attributes || []).map(\n\t\t\t({link, array, deleted, required, unique, type, ...attr}) => ({\n\t\t\t\t...attr,\n\t\t\t\ttypeAttr: type,\n\t\t\t\tnickDictLink: link || null,\n\t\t\t\tarrayAttr: Number(array) || 0,\n\t\t\t\tdeleted: Number(deleted) || 0,\n\t\t\t\trequired: Number(required) || 0,\n\t\t\t\tunique: Number(unique) || 0\n\t\t\t})\n\t\t)\n\t};\n}\n\nfunction shittylizeElement(data) {\n\tconst {deleted, values, ...rest} = data || {};\n\n\treturn {\n\t\t...rest,\n\t\tdeleted: Number(deleted),\n\t\tvalues: Object.values(values || {}).map(\n\t\t\t({deleted, value, nick, ...rest}) => ({\n\t\t\t\t...rest,\n\t\t\t\tnickAttr: nick,\n\t\t\t\tdeleted: Number(deleted),\n\t\t\t\tvalue: value || null\n\t\t\t})\n\t\t)\n\t};\n}\n\n/* Action creators */\nexport const actions = {\n\tloadAllCatalogs() {\n\t\treturn {\n\t\t\ttype: LOAD_DICTS,\n\t\t\tpayload: {\n\t\t\t\trequest: {\n\t\t\t\t\turl: `${api}/nsi/meta/dict`\n\t\t\t\t}\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\tmock: requestConfig => {\n\t\t\t\t\treturn dict;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tloadElements(nick) {\n\t\treturn {\n\t\t\ttype: LOAD_DICT_ELEMENTS,\n\t\t\tpayload: {\n\t\t\t\trequest: {\n\t\t\t\t\turl: `${api}/nsi/dict/${nick}`\n\t\t\t\t}\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\tmock: requestConfig => {\n\t\t\t\t\treturn elements;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tmetaDictSave(dict) {\n\t\treturn {\n\t\t\ttype: SAVE_DICT,\n\t\t\tpayload: {\n\t\t\t\trequest: {\n\t\t\t\t\turl: `${api}/nsi/meta/dict/save`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(\n\t\t\t\t\t\tcapitlizeObjectKeys({\n\t\t\t\t\t\t\tmetaDict: {\n\t\t\t\t\t\t\t\ttransfer: 0,\n\t\t\t\t\t\t\t\t...shittylize(dict)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tsaveDictRow(data, nickDict) {\n\t\treturn {\n\t\t\ttype: SAVE_DICT_ROW,\n\t\t\tpayload: {\n\t\t\t\trequest: {\n\t\t\t\t\turl: `${api}/nsi/dict/save`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(\n\t\t\t\t\t\tcapitlizeObjectKeys({\n\t\t\t\t\t\t\tvalueDict: {\n\t\t\t\t\t\t\t\tnickDict,\n\t\t\t\t\t\t\t\telement: [shittylizeElement(data)]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tmakeReport(nick) {\n\t\treturn {\n\t\t\ttype: MAKE_REPORT,\n\t\t\tpayload: {nick}\n\t\t};\n\t}\n};\n\nfunction normalize(response) {\n\treturn (Array.isArray(response) ? response : [response]).map(\n\t\t({\n\t\t\tmetaAttributes,\n\t\t\tmetaAttrs,\n\t\t\tnsiMetaAttrs,\n\t\t\tdeleted,\n\t\t\thierarchyDict,\n\t\t\ttransfer,\n\t\t\t...rest\n\t\t}) => ({\n\t\t\t...rest,\n\t\t\tdeleted: Boolean(deleted),\n\t\t\thierarchy: Boolean(hierarchyDict),\n\t\t\ttransfer: Boolean(transfer)\n\t\t})\n\t);\n}\n\nfunction normalizeElements(elements) {\n\treturn (elements || []).map(({deleted, values, id, ...rest}) => ({\n\t\t...rest,\n\t\telementId: id,\n\t\tdeleted: Boolean(deleted),\n\t\tvalues: dataToEntities(\n\t\t\t'nick',\n\t\t\tvalues.map(({deleted, valueAttr, value, ...rest}) => ({\n\t\t\t\t...rest,\n\t\t\t\tdeleted: Boolean(deleted),\n\t\t\t\tvalue: value || valueAttr\n\t\t\t}))\n\t\t)\n\t}));\n}\n\nfunction normalizeAttributes(attributes) {\n\treturn attributes.map(\n\t\t({\n\t\t\tid,\n\t\t\ttypeAttr,\n\t\t\tarrayAttr,\n\t\t\trequired,\n\t\t\tdeleted,\n\t\t\tunique,\n\t\t\tnickDictLink,\n\t\t\t...rest\n\t\t}) => ({\n\t\t\t...rest,\n\t\t\tnick: id.nick,\n\t\t\ttype: typeAttr,\n\t\t\tlink: nickDictLink,\n\t\t\tarray: Boolean(arrayAttr),\n\t\t\trequired: Boolean(required),\n\t\t\tdeleted: Boolean(deleted),\n\t\t\tunique: Boolean(unique)\n\t\t})\n\t);\n}\n\n/* Reducer */\nconst initialState = {\n\tcatalogs: {},\n\tattributes: {},\n\telements: {}\n};\n\nfunction reducer(state = initialState, {type, payload}) {\n\tswitch (type) {\n\t\tcase success(LOAD_DICTS): {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcatalogs: dataToEntities('nick', normalize(payload.data)),\n\t\t\t\tattributes: payload.data.reduce((acc, {nick, nsiMetaAttrs}) => {\n\t\t\t\t\tacc[nick] = dataToEntities(\n\t\t\t\t\t\t'nick',\n\t\t\t\t\t\tnormalizeAttributes(nsiMetaAttrs).sort(\n\t\t\t\t\t\t\t(a, b) => a.orders - b.orders\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {})\n\t\t\t};\n\t\t}\n\n\t\tcase success(SAVE_DICT):\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcatalogs: {\n\t\t\t\t\t...state.catalogs,\n\t\t\t\t\t[payload.data.nick]: normalize(payload.data)[0]\n\t\t\t\t},\n\t\t\t\tattributes: {\n\t\t\t\t\t...state.attributes,\n\t\t\t\t\t[payload.data.nick]: dataToEntities(\n\t\t\t\t\t\t'nick',\n\t\t\t\t\t\tnormalizeAttributes(payload.data.nsiMetaAttrs)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\n\t\tcase success(LOAD_DICT_ELEMENTS):\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\telements: {\n\t\t\t\t\t...state.elements,\n\t\t\t\t\t[payload.data.dict.nick]: dataToEntities(\n\t\t\t\t\t\t'elementId',\n\t\t\t\t\t\tnormalizeElements(payload.data.dict.elements)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\n\t\tcase success(SAVE_DICT_ROW):\n\t\t\t// console.log(payload.data)\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\telements: {\n\t\t\t\t\t...state.elements,\n\t\t\t\t\t[payload.data.dict.nick]: dataToEntities(\n\t\t\t\t\t\t'elementId',\n\t\t\t\t\t\tnormalizeElements(payload.data.dict.elements)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default {\n\treducer,\n\tinitialState,\n\tactions,\n\ttypes,\n\tname,\n\tpkg\n};\n"]}