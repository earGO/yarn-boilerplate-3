{"version":3,"sources":["arrayToTree.js"],"names":["arrayToTree","items","config","id","parentId","rootItems","lookup","i","_items","length","item","itemId","Object","prototype","hasOwnProperty","call","data","children","treeItem","push","unnestData","map","removeChildrenProp","rest","niceFormat"],"mappings":";;;;;;;;;;;;;;;;;AAAe,SAASA,WAAT,CACdC,KADc,EAGb;AAAA,MADDC,MACC,uEADQ;AAACC,IAAAA,EAAE,EAAE,KAAL;AAAYC,IAAAA,QAAQ,EAAE;AAAtB,GACR;AACD,MAAMC,SAAS,GAAG,EAAlB;AACA,MAAMC,MAAM,GAAG,EAAf;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,MAAM,GAAGP,KAAzB,EAAgCM,CAAC,GAAGC,MAAM,CAACC,MAA3C,EAAmDF,CAAC,EAApD,EAAwD;AACvD,QAAMG,IAAI,GAAGF,MAAM,CAACD,CAAD,CAAnB;AACA,QAAMI,MAAM,GAAGD,IAAI,CAACR,MAAM,CAACC,EAAR,CAAnB;AACA,QAAMC,QAAQ,GAAGM,IAAI,CAACR,MAAM,CAACE,QAAR,CAArB;;AAEA,QAAI,CAACQ,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCT,MAArC,EAA6CK,MAA7C,CAAL,EAA2D;AAC1DL,MAAAA,MAAM,CAACK,MAAD,CAAN,GAAiB;AAACK,QAAAA,IAAI,EAAE,IAAP;AAAaC,QAAAA,QAAQ,EAAE;AAAvB,OAAjB;AACA;;AACDX,IAAAA,MAAM,CAACK,MAAD,CAAN,CAAeK,IAAf,GAAsBN,IAAtB;AACA,QAAMQ,QAAQ,GAAGZ,MAAM,CAACK,MAAD,CAAvB;;AACA,QAAIP,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,EAAlC,IAAwC,CAACA,QAA7C,EAAuD;AACtDC,MAAAA,SAAS,CAACc,IAAV,CAAeD,QAAf;AACA,KAFD,MAEO;AACN,UAAI,CAACN,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCT,MAArC,EAA6CF,QAA7C,CAAL,EAA6D;AAC5DE,QAAAA,MAAM,CAACF,QAAD,CAAN,GAAmB;AAACY,UAAAA,IAAI,EAAE,IAAP;AAAaC,UAAAA,QAAQ,EAAE;AAAvB,SAAnB;AACA;;AACDX,MAAAA,MAAM,CAACF,QAAD,CAAN,CAAiBa,QAAjB,CAA0BE,IAA1B,CAA+BD,QAA/B;AACA;AACD;;AACD,MAAME,UAAU,GAAG,SAAbA,UAAa,CAAAV,IAAI,EAAI;AAC1B,6BACIA,IAAI,CAACM,IADT;AAECC,MAAAA,QAAQ,EACPP,IAAI,CAACO,QAAL,IAAiBP,IAAI,CAACO,QAAL,CAAcR,MAA/B,GACGC,IAAI,CAACO,QAAL,CAAcI,GAAd,CAAkBD,UAAlB,CADH,GAEG;AALL;AAOA,GARD;;AASA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAyB;AAAA,QAAvBL,QAAuB,QAAvBA,QAAuB;AAAA,QAAVM,IAAU;;AACnD,WAAON,QAAQ,CAACR,MAAT,KAAoB,CAApB,qBACAc,IADA;AAEHN,MAAAA,QAAQ,EAAEA,QAAQ,CAACI,GAAT,CAAaC,kBAAb;AAFP,OAE4CC,IAF5C,CAAP;AAGA,GAJD;;AAKA,MAAIC,UAAU,GAAGnB,SAAS,CAACgB,GAAV,CAAcD,UAAd,EAA0BC,GAA1B,CAA8BC,kBAA9B,CAAjB;AACA,SAAO;AACNjB,IAAAA,SAAS,EAAEmB,UADL;AAENlB,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA","sourcesContent":["export default function arrayToTree(\n\titems,\n\tconfig = {id: 'key', parentId: 'parentId'}\n) {\n\tconst rootItems = [];\n\tconst lookup = {};\n\tfor (let i = 0, _items = items; i < _items.length; i++) {\n\t\tconst item = _items[i];\n\t\tconst itemId = item[config.id];\n\t\tconst parentId = item[config.parentId];\n\n\t\tif (!Object.prototype.hasOwnProperty.call(lookup, itemId)) {\n\t\t\tlookup[itemId] = {data: null, children: []};\n\t\t}\n\t\tlookup[itemId].data = item;\n\t\tconst treeItem = lookup[itemId];\n\t\tif (parentId === null || parentId === '' || !parentId) {\n\t\t\trootItems.push(treeItem);\n\t\t} else {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(lookup, parentId)) {\n\t\t\t\tlookup[parentId] = {data: null, children: []};\n\t\t\t}\n\t\t\tlookup[parentId].children.push(treeItem);\n\t\t}\n\t}\n\tconst unnestData = item => {\n\t\treturn {\n\t\t\t...item.data,\n\t\t\tchildren:\n\t\t\t\titem.children && item.children.length\n\t\t\t\t\t? item.children.map(unnestData)\n\t\t\t\t\t: []\n\t\t};\n\t};\n\tconst removeChildrenProp = ({children, ...rest}) => {\n\t\treturn children.length === 0\n\t\t\t? {...rest}\n\t\t\t: {children: children.map(removeChildrenProp), ...rest};\n\t};\n\tlet niceFormat = rootItems.map(unnestData).map(removeChildrenProp);\n\treturn {\n\t\trootItems: niceFormat,\n\t\tlookup\n\t};\n}\n"]}