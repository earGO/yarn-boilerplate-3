54b18d952e43a8c49adda765ecf3e8d3
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _reduxSagaRequests = require("redux-saga-requests");

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _selectors = require("../module/selectors");

var moduleActions = _interopRequireWildcard(require("../module/actions"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _import = require("../../../import");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var projectCardReducer = _import.projectCardService.projectCardReducer,
    name = _import.projectCardService.name,
    types = _import.projectCardService.types,
    actions = _import.projectCardService.actions,
    api = _import.projectCardService.api,
    endpoints = _import.projectCardService.endpoints;
var initialMockState = {
  mockTitle: 'mockTitle',
  mockData: ['papul', 'banana', 'minion']
};
var middlewares = [_reduxThunk["default"]];
var mockStore = (0, _reduxMockStore["default"])(middlewares);
var store = mockStore({
  project: []
});
describe('Test projectCard service', function () {
  for (var prop in types) {
    if (types.hasOwnProperty(prop)) {
      it('type format should be correct', function () {
        var typeValue = name + '/' + prop;
        expect(types[prop]).toBe(typeValue);
      });
    }
  }
});
describe('Test projectCard service reducer', function () {
  it('should handle LOAD_PROJECT', function () {
    var successAction = {
      type: (0, _reduxSagaRequests.success)(types.LOAD_PROJECT),
      payload: {
        data: {
          test: 'test'
        }
      }
    };
    expect(projectCardReducer({}, successAction)).toEqual({
      project: {
        test: 'test'
      }
    });
  });
  it('should return emptyState when error', function () {
    var errorAction = {
      type: (0, _reduxSagaRequests.error)(types.LOAD_PROJECT),
      payload: "if you see it reducer doesn't works"
    };
    expect(projectCardReducer({
      initialState: 'initialState'
    }, errorAction)).toEqual({
      initialState: 'initialState'
    });
  });
});
describe('Test projectCard service actions', function () {
  beforeEach(function () {
    // Runs before each test in the suite
    store.clearActions();
  });
  afterEach(function () {
    _fetchMock["default"].restore();
  });
  test('Dispatches the correct action and payload', function () {
    var expectedActions = [{
      payload: {
        request: {
          url: 'http://localhost:3000/project/'
        }
      },
      type: 'project-card/LOAD_TABS_SUCCESS'
    }];
    store.dispatch(actions.loadProject());
    expect(store.getActions()).toEqual(expectedActions);
  });
  test('creates project-card/LOAD_PROJECT_SUCCESS when fetching data has been done', function () {
    var endpoint = api + endpoints.project;

    _fetchMock["default"].getOnce(endpoint, {
      payload: {
        request: {
          url: 'http://localhost:3000/project/'
        }
      },
      headers: {
        'content-type': 'application/json'
      }
    });

    var expectedActions = [{
      type: types.LOAD_PROJECT
    }, {
      type: (0, _reduxSagaRequests.success)(types.LOAD_TABS),
      body: {
        project: {
          someprojectId: 'theId'
        }
      }
    }];
    store.dispatch(actions.loadProject());
    expect(store.getActions()).toEqual(expectedActions);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZHV4U2FnYXMudGVzdC5qcyJdLCJuYW1lcyI6WyJwcm9qZWN0Q2FyZFJlZHVjZXIiLCJwcm9qZWN0Q2FyZFNlcnZpY2UiLCJuYW1lIiwidHlwZXMiLCJhY3Rpb25zIiwiYXBpIiwiZW5kcG9pbnRzIiwiaW5pdGlhbE1vY2tTdGF0ZSIsIm1vY2tUaXRsZSIsIm1vY2tEYXRhIiwibWlkZGxld2FyZXMiLCJ0aHVuayIsIm1vY2tTdG9yZSIsInN0b3JlIiwicHJvamVjdCIsImRlc2NyaWJlIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiaXQiLCJ0eXBlVmFsdWUiLCJleHBlY3QiLCJ0b0JlIiwic3VjY2Vzc0FjdGlvbiIsInR5cGUiLCJMT0FEX1BST0pFQ1QiLCJwYXlsb2FkIiwiZGF0YSIsInRlc3QiLCJ0b0VxdWFsIiwiZXJyb3JBY3Rpb24iLCJpbml0aWFsU3RhdGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBY3Rpb25zIiwiYWZ0ZXJFYWNoIiwiZmV0Y2hNb2NrIiwicmVzdG9yZSIsImV4cGVjdGVkQWN0aW9ucyIsInJlcXVlc3QiLCJ1cmwiLCJkaXNwYXRjaCIsImxvYWRQcm9qZWN0IiwiZ2V0QWN0aW9ucyIsImVuZHBvaW50IiwiZ2V0T25jZSIsImhlYWRlcnMiLCJMT0FEX1RBQlMiLCJib2R5Iiwic29tZXByb2plY3RJZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0lBR0NBLGtCLEdBTUdDLDBCLENBTkhELGtCO0lBQ0FFLEksR0FLR0QsMEIsQ0FMSEMsSTtJQUNBQyxLLEdBSUdGLDBCLENBSkhFLEs7SUFDQUMsTyxHQUdHSCwwQixDQUhIRyxPO0lBQ0FDLEcsR0FFR0osMEIsQ0FGSEksRztJQUNBQyxTLEdBQ0dMLDBCLENBREhLLFM7QUFHRCxJQUFNQyxnQkFBZ0IsR0FBRztBQUN4QkMsRUFBQUEsU0FBUyxFQUFFLFdBRGE7QUFFeEJDLEVBQUFBLFFBQVEsRUFBRSxDQUFDLE9BQUQs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ckMsR0FBRyxHQUFHQyxTQUFTLENBQUNRLE9BQWpDOztBQUNBb0IsMEJBQVVTLE9BQVYsQ0FBa0JELFFBQWxCLEVBQTRCO0FBQzNCakIsTUFBQUEsT0FBTyxFQUFFO0FBQUNZLFFBQUFBLE9BQU8sRUFBRTtBQUFDQyxVQUFBQSxHQUFHLEVBQUU7QUFBTjtBQUFWLE9BRGtCO0FBRTNCTSxNQUFBQSxPQUFPLEVBQUU7QUFBQyx3QkFBZ0I7QUFBakI7QUFGa0IsS0FBNUI7O0FBS0EsUUFBTVIsZUFBZSxHQUFHLENBQ3ZCO0FBQUNiLE1BQUFBLElBQUksRUFBRXBCLEtBQUssQ0FBQ3FCO0FBQWIsS0FEdUIsRUFFdkI7QUFDQ0QsTUFBQUEsSUFBSSxFQUFFLGdDQUFRcEIsS0FBSyxDQUFDMEMsU0FBZCxDQURQO0FBRUNDLE1BQUFBLElBQUksRUFBRTtBQUFDaEMsUUFBQUEsT0FBTyxFQUFFO0FBQUNpQyxVQUFBQSxhQUFhLEVBQUU7QUFBaEI7QUFBVjtBQUZQLEtBRnVCLENBQXhCO0FBT0FsQyxJQUFBQSxLQUFLLENBQUMwQixRQUFOLENBQWVuQyxPQUFPLENBQUNvQyxXQUFSLEVBQWY7QUFDQXBCLElBQUFBLE1BQU0sQ0FBQ1AsS0FBSyxDQUFDNEIsVUFBTixFQUFELENBQU4sQ0FBMkJiLE9BQTNCLENBQW1DUSxlQUFuQztBQUNBLEdBaEJHLENBQUo7QUFpQkEsQ0FuQ08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZXJyb3IsIHN1Y2Nlc3N9IGZyb20gJ3JlZHV4LXNhZ2EtcmVxdWVzdHMnO1xuaW1wb3J0IHRodW5rIGZyb20gJ3JlZHV4LXRodW5rJztcbmltcG9ydCB7c2VsZWN0b3JzfSBmcm9tICcuLi9tb2R1bGUvc2VsZWN0b3JzJztcbmltcG9ydCAqIGFzIG1vZHVsZUFjdGlvbnMgZnJvbSAnLi4vbW9kdWxlL2FjdGlvbnMnO1xuaW1wb3J0IGZldGNoTW9jayBmcm9tICdmZXRjaC1tb2NrJztcbmltcG9ydCB7cHJvamVjdENhcmRTZXJ2aWNlfSBmcm9tICcuLi8uLi8uLi9pbXBvcnQnO1xuaW1wb3J0IGNvbmZpZ3VyZVN0b3JlIGZyb20gJ3JlZHV4LW1vY2stc3RvcmUnO1xuXG5jb25zdCB7XG5cdHByb2plY3RDYXJkUmVkdWNlcixcblx0bmFtZSxcblx0dHlwZXMsXG5cdGFjdGlvbnMsXG5cdGFwaSxcblx0ZW5kcG9pbnRzXG59ID0gcHJvamVjdENhcmRTZXJ2aWNlO1xuXG5jb25zdCBpbml0aWFsTW9ja1N0YXRlID0ge1xuXHRtb2NrVGl0bGU6ICdtb2NrVGl0bGUnLFxuXHRtb2NrRGF0YTogWydwYXB1bCcsICdiYW5hbmEnLCAnbWluaW9uJ11cbn07XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rXTtcbmNvbnN0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKG1pZGRsZXdhcmVzKTtcbmNvbnN0IHN0b3JlID0gbW9ja1N0b3JlKHtwcm9qZWN0OiBbXX0pO1xuXG5kZXNjcmliZSgnVGVzdCBwcm9qZWN0Q2FyZCBzZXJ2aWNlJywgKCkgPT4ge1xuXHRmb3IgKHZhciBwcm9wIGluIHR5cGVzKSB7XG5cdFx0aWYgKHR5cGVzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG5cdFx0XHRpdCgndHlwZSBmb3JtYXQgc2hvdWxkIGJlIGNvcnJlY3QnLCAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHR5cGVWYWx1ZSA9IG5hbWUgKyAnLycgKyBwcm9wO1xuXHRcdFx0XHRleHBlY3QodHlwZXNbcHJvcF0pLnRvQmUodHlwZVZhbHVlKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSk7XG5cbmRlc2NyaWJlKCdUZXN0IHByb2plY3RDYXJkIHNlcnZpY2UgcmVkdWNlcicsICgpID0+IHtcblx0aXQoJ3Nob3VsZCBoYW5kbGUgTE9BRF9QUk9KRUNUJywgKCkgPT4ge1xuXHRcdGNvbnN0IHN1Y2Nlc3NBY3Rpb24gPSB7XG5cdFx0XHR0eXBlOiBzdWNjZXNzKHR5cGVzLkxPQURfUFJPSkVDVCksXG5cdFx0XHRwYXlsb2FkOiB7ZGF0YToge3Rlc3Q6ICd0ZXN0J319XG5cdFx0fTtcblx0XHRleHBlY3QocHJvamVjdENhcmRSZWR1Y2VyKHt9LCBzdWNjZXNzQWN0aW9uKSkudG9FcXVhbCh7XG5cdFx0XHRwcm9qZWN0OiB7dGVzdDogJ3Rlc3QnfVxuXHRcdH0pO1xuXHR9KTtcblx0aXQoJ3Nob3VsZCByZXR1cm4gZW1wdHlTdGF0ZSB3aGVuIGVycm9yJywgKCkgPT4ge1xuXHRcdGNvbnN0IGVycm9yQWN0aW9uID0ge1xuXHRcdFx0dHlwZTogZXJyb3IodHlwZXMuTE9BRF9QUk9KRUNUKSxcblx0XHRcdHBheWxvYWQ6IFwiaWYgeW91IHNlZSBpdCByZWR1Y2VyIGRvZXNuJ3Qgd29ya3NcIlxuXHRcdH07XG5cdFx0ZXhwZWN0KFxuXHRcdFx0cHJvamVjdENhcmRSZWR1Y2VyKHtpbml0aWFsU3RhdGU6ICdpbml0aWFsU3RhdGUnfSwgZXJyb3JBY3Rpb24pXG5cdFx0KS50b0VxdWFsKHtpbml0aWFsU3RhdGU6ICdpbml0aWFsU3RhdGUnfSk7XG5cdH0pO1xufSk7XG5cbmRlc2NyaWJlKCdUZXN0IHByb2plY3RDYXJkIHNlcnZpY2UgYWN0aW9ucycsICgpID0+IHtcblx0YmVmb3JlRWFjaCgoKSA9PiB7XG5cdFx0Ly8gUnVucyBiZWZvcmUgZWFjaCB0ZXN0IGluIHRoZSBzdWl0ZVxuXHRcdHN0b3JlLmNsZWFyQWN0aW9ucygpO1xuXHR9KTtcblx0YWZ0ZXJFYWNoKCgpID0+IHtcblx0XHRmZXRjaE1vY2sucmVzdG9yZSgpO1xuXHR9KTtcblx0dGVzdCgnRGlzcGF0Y2hlcyB0aGUgY29ycmVjdCBhY3Rpb24gYW5kIHBheWxvYWQnLCAoKSA9PiB7XG5cdFx0Y29uc3QgZXhwZWN0ZWRBY3Rpb25zID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRwYXlsb2FkOiB7cmVxdWVzdDoge3VybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9wcm9qZWN0Lyd9fSxcblx0XHRcdFx0dHlwZTogJ3Byb2plY3QtY2FyZC9MT0FEX1RBQlNfU1VDQ0VTUydcblx0XHRcdH1cblx0XHRdO1xuXHRcdHN0b3JlLmRpc3BhdGNoKGFjdGlvbnMubG9hZFByb2plY3QoKSk7XG5cdFx0ZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuXHR9KTtcblx0dGVzdCgnY3JlYXRlcyBwcm9qZWN0LWNhcmQvTE9BRF9QUk9KRUNUX1NVQ0NFU1Mgd2hlbiBmZXRjaGluZyBkYXRhIGhhcyBiZWVuIGRvbmUnLCAoKSA9PiB7XG5cdFx0Y29uc3QgZW5kcG9pbnQgPSBhcGkgKyBlbmRwb2ludHMucHJvamVjdDtcblx0XHRmZXRjaE1vY2suZ2V0T25jZShlbmRwb2ludCwge1xuXHRcdFx0cGF5bG9hZDoge3JlcXVlc3Q6IHt1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvcHJvamVjdC8nfX0sXG5cdFx0XHRoZWFkZXJzOiB7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cblx0XHR9KTtcblxuXHRcdGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcblx0XHRcdHt0eXBlOiB0eXBlcy5MT0FEX1BST0pFQ1R9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBzdWNjZXNzKHR5cGVzLkxPQURfVEFCUyksXG5cdFx0XHRcdGJvZHk6IHtwcm9qZWN0OiB7c29tZXByb2plY3RJZDogJ3RoZUlkJ319XG5cdFx0XHR9XG5cdFx0XTtcblx0XHRzdG9yZS5kaXNwYXRjaChhY3Rpb25zLmxvYWRQcm9qZWN0KCkpO1xuXHRcdGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKTtcblx0fSk7XG59KTtcbiJdfQ==